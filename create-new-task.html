<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <title>Добавление задачи</title>
    <link id="theme-style" href="css/light-style-4.css" rel="stylesheet">
    <link rel="icon" href="img/logo.png" type="png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" 
    rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
  </head>
  <body>
    <form id="darkTaskForm">
      <section class="tasks-panel">
        <button id="backButton" class="back-button">
          <img src="/img/backButton.png" class="back-icon"
          data-light="img/backButton-light.png" data-dark="/img/backButton.png">
        </button>
        <h1 class="tasks-panel-h1">Создать новое</h1>
        <select id="mySelect" name="type-task" class="type-task">
          <option value="task" class="type-task-item" selected="selected">Задание</option>
          <option value="event" class="type-task-item">Событие</option>
        </select>
      </section>
      
      <main class="content">
      <section class="list-tasks">
        <input list="no-datalist" autocomplete="off" name="name-task" class="name-task"  placeholder="Название" size="368" maxlength="29" required>
        <textarea list="no-datalist" autocomplete="off" name="desc-task" class="desc-task"  type="text" placeholder="Описание" size="368"></textarea>
      
        <section class="create-task-tags">
          <img src="/img/bookmark_add.png" class="task-tag-emblem"
          data-light="img/bookmark_add_light.png" data-dark="/img/bookmark_add.png">
          <input 
              type="text" 
              name="add-tag" 
              class="add-tag" 
              id="inputField" 
              placeholder="+ Добавить" 
              onkeyup="handleKeyUp(event)" 
          >
          <div id="output" class="tags-container"></div>
        </section>
        
        <section class="priority">
          <img src="/img/signal_cellular_alt.png" class="priority-emblem"
          data-light="img/signal_cellular_alt-light.png" data-dark="/img/signal_cellular_alt.png">
          <select
            id="inputFieldPriority"
            class="add-priority"
            name='priority-level'
            required
          >
            <option value="" disabled selected hidden>Приоритет</option>
            <option value="not-matter">Не важно</option>
            <option value="normal">Нормально</option>
            <option value="matter">Важно</option>
          </select>
        </section>

        <section class="date-event">
          <img class="watch" src="/img/schedule.png"
          data-light="img/schedule_light.png" data-dark="/img/schedule.png">
          <div id="dateContainer" class="white-text">
            <input class="day-task" name="day-task" type="date" id="dateInput" required>
            <div id="date-error" class="error-message" style="color: red; font-size: 14px; display: none;">
              Нельзя указывать дату из прошлого
            </div>
          </div>
          <div id="datetime-error" style="color: red; display: none; font-size: 14px;">
            Нельзя указывать время из прошлого
          </div>
          <section class="task-time-picker">
            <input type="text" name="task-time" class="task-time" autocomplete="off" readonly required>
  
            <div id="overlay" class="overlay"></div>
            <div id="popup-time" class="popup-time">
              <p class="choice">Выберите время</p>
  
              <div class="time-picker">
                <div class="hours">
                  <div id="hours-prev-value" class="time prev-time"></div>
                  <div id="hours-current-value" class="time current-time"></div>
                  <div id="hours-next-value" class="time future-time"></div>
                </div>
                <p class="time-divider">:</p>
                <div class="minutes">
                  <div id="minutes-prev-value" class="time prev-time"></div>
                  <div id="minutes-current-value" class="time current-time"></div>
                  <div id="minutes-next-value" class="time future-time"></div>
                </div>
              </div>
  
              <div class="buttons">
                <button type="button" class="popup-cancel">
                  <p>Отмена</p>
                </button>
                <button type="button" class="popup-save">
                  <p>Сохранить</p>
                </button>
              </div>
            </div>
          </section>
        </section>
  
        <section class="notification">
          <img src="/img/notification_add.png" class="notification-bell"
          data-light="img/notification_add_light.png" data-dark="/img/notification_add.png">
          <p class="Za">За:</p>
          <div class="time-input-container">
              <input type="number" name="time-notification" class="time-notification number-time-event" min="1" required onchange="updateMinutesLabel(this.value)">
              <span id="minutes-label" class="minutes-label">минут</span>
          </div>
        </section>
      </section>
    </main>

      <section class="bottom-nav">
      </section>
  
      <section class="footer">
        <button type="submit" class="yellow-button"> 
          <img class="plus" src="/img/add_2.png">
          <p class="button-add-task">Добавить новую задачу</p>
          <div class="home-indicator"></div>
        </button>
      </section>
      </form>
      
    <script src="js/create-new-task.js"></script>
    <script src="js/task-time-picker.js"></script>
    <script type='module' src="js/fetch-darkTaskForm.js"></script>
    <script src="js/theme-change.js"></script>
  </body>
</html>
